{% comment %}
  Header section - Logo + Navigation bar (same as original React)
  All critical styles are in this section so the header always appears.
{% endcomment %}
<style>
  /* Header: visible on both desktop and mobile/cellphone */
  #elovyn-header-wrap {
    display: block !important;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    background: transparent;
    transition: background 0.5s, backdrop-filter 0.5s, border 0.5s;
    -webkit-tap-highlight-color: transparent;
  }
  #elovyn-header-wrap.scrolled {
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
  }
  #elovyn-header-wrap .elovyn-header-inner {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 0.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: 4rem;
    gap: 0.35rem;
    flex-wrap: wrap;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-header-inner {
      min-height: 5rem;
      padding: 0 1rem;
      gap: 0.5rem;
      flex-wrap: nowrap;
    }
  }
  @media (min-width: 1024px) {
    #elovyn-header-wrap .elovyn-header-inner {
      height: 5rem;
      padding: 0 1.5rem;
      gap: 1rem;
    }
  }
  /* Logo: smaller on mobile, full size on desktop */
  #elovyn-header-wrap .elovyn-logo-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #fff;
    font-weight: 700;
    font-size: 1rem;
    flex-shrink: 0;
    min-height: 44px;
    min-width: 44px;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-logo-link { font-size: 1.25rem; }
  }
  #elovyn-header-wrap .elovyn-logo-img {
    height: 3rem;
    max-height: 3rem;
    width: auto;
    display: block;
    object-fit: contain;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-logo-img {
      height: 5rem;
      max-height: 5rem;
    }
  }
  @media (min-width: 1024px) {
    #elovyn-header-wrap .elovyn-logo-img {
      height: 8rem;
      max-height: 8rem;
    }
  }
  /* Nav bar - visible on all screens (mobile + desktop) */
  #elovyn-header-wrap .elovyn-nav {
    display: flex !important;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    justify-content: center;
    flex: 1;
    min-width: 0;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-nav { gap: 1rem; }
  }
  @media (min-width: 1024px) {
    #elovyn-header-wrap .elovyn-nav {
      gap: 1.5rem;
      flex-wrap: nowrap;
      max-width: 600px;
    }
  }
  #elovyn-header-wrap .elovyn-nav a {
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    font-size: 0.7rem;
    font-weight: 500;
    transition: color 0.2s;
    white-space: nowrap;
    padding: 0.25rem 0.35rem;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-nav a { font-size: 0.8rem; padding: 0.35rem 0.5rem; }
  }
  @media (min-width: 1024px) {
    #elovyn-header-wrap .elovyn-nav a { font-size: 0.875rem; padding: 0; }
  }
  #elovyn-header-wrap .elovyn-nav a:hover {
    color: #fff;
  }
  /* Right side: icons + CTA + hamburger - visible on all screens */
  #elovyn-header-wrap .elovyn-header-right {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    flex-shrink: 0;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-header-right { gap: 0.5rem; }
  }
  @media (min-width: 1024px) {
    #elovyn-header-wrap .elovyn-header-right { gap: 1rem; }
  }
  #elovyn-header-wrap .elovyn-header-right a,
  #elovyn-header-wrap .elovyn-header-right button {
    color: rgba(255, 255, 255, 0.9);
    padding: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
    min-width: 44px;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-header-right a,
    #elovyn-header-wrap .elovyn-header-right button {
      min-width: 40px;
      min-height: 40px;
    }
  }
  #elovyn-header-wrap .elovyn-header-right a:hover,
  #elovyn-header-wrap .elovyn-header-right a:focus,
  #elovyn-header-wrap .elovyn-header-right button:hover,
  #elovyn-header-wrap .elovyn-header-right button:focus {
    color: #fff;
  }
  /* CTA button - visible on both mobile and desktop */
  #elovyn-header-wrap .elovyn-cta {
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 0.75rem;
    font-size: 0.7rem;
    font-weight: 500;
    background: transparent;
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 9999px;
    text-decoration: none;
    white-space: nowrap;
    min-height: 40px;
  }
  @media (min-width: 768px) {
    #elovyn-header-wrap .elovyn-cta {
      padding: 0.75rem 1.5rem;
      font-size: 0.75rem;
    }
  }
  #elovyn-header-wrap .elovyn-cta:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.6);
    color: #fff;
  }
  /* Hamburger - visible on mobile/tablet, hidden on desktop */
  #elovyn-header-wrap .elovyn-mobile-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
  }
  @media (min-width: 1024px) {
    #elovyn-header-wrap .elovyn-mobile-btn { display: none !important; }
  }
  #elovyn-header-wrap .elovyn-mobile-btn .icon-close {
    display: none;
  }
  #elovyn-header-wrap .elovyn-mobile-btn.active .icon-open { display: none; }
  #elovyn-header-wrap .elovyn-mobile-btn.active .icon-close { display: block !important; }
  /* Mobile menu overlay - cellphone full screen */
  #elovyn-mobile-menu {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9998;
    background: #000;
    padding: 5rem 1.5rem 2rem;
    flex-direction: column;
    align-items: center;
    gap: 0;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  @media (min-width: 1024px) {
    #elovyn-mobile-menu { display: none !important; }
  }
  #elovyn-mobile-menu.open {
    display: flex !important;
  }
  #elovyn-mobile-menu nav {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    width: 100%;
    max-width: 320px;
  }
  #elovyn-mobile-menu a {
    color: #fff;
    text-decoration: none;
    font-size: 1.25rem;
    font-weight: 500;
    padding: 1rem 1.25rem;
    min-height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    text-align: center;
    -webkit-tap-highlight-color: transparent;
  }
  @media (min-width: 375px) {
    #elovyn-mobile-menu a { font-size: 1.5rem; }
  }
  #elovyn-mobile-menu a:hover,
  #elovyn-mobile-menu a:active {
    background: rgba(255, 255, 255, 0.08);
    color: #fff;
  }
  #elovyn-mobile-menu .elovyn-mobile-cta {
    margin-top: 1.5rem;
    padding: 1rem 1.5rem;
    font-size: 1rem;
    font-weight: 500;
    background: #fff;
    color: #000;
    border-radius: 9999px;
    text-decoration: none;
    min-height: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  #elovyn-header-wrap .elovyn-cart-badge {
    position: absolute;
    top: -0.25rem;
    right: -0.25rem;
    background: #d4a574;
    color: #fff;
    font-size: 0.7rem;
    border-radius: 9999px;
    min-width: 1.25rem;
    height: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 0.25rem;
  }
</style>

<div id="elovyn-header-wrap">
  <header class="elovyn-header" role="banner">
    <div class="elovyn-header-inner">
      {%- comment -%} Logo {%- endcomment -%}
      <a href="{% if section.settings.logo_link != blank %}{{ section.settings.logo_link }}{% else %}{{ routes.root_url }}{% endif %}" class="elovyn-logo-link">
        {%- if section.settings.logo != blank -%}
          <img src="{{ section.settings.logo | image_url: width: 400 }}" alt="{{ section.settings.logo_alt | default: shop.name }}" class="elovyn-logo-img" loading="eager" width="400" height="128">
        {%- else -%}
          <img src="{{ 'elovyn-logo.png' | asset_url }}" alt="{{ section.settings.logo_alt | default: 'ELOVYN' }}" class="elovyn-logo-img" loading="eager" width="400" height="128">
        {%- endif -%}
      </a>

      {%- comment -%} Navigation bar {%- endcomment -%}
      <nav class="elovyn-nav" role="navigation" aria-label="Main navigation">
        {%- if section.blocks.size > 0 -%}
          {%- for block in section.blocks -%}
            {%- if block.type == 'nav_link' -%}
              {%- assign link_url = block.settings.url -%}
              {%- if link_url == blank -%}{%- assign link_url = '#' -%}{%- endif -%}
              <a href="{{ link_url }}" {{ block.shopify_attributes }}>{{ block.settings.label | default: 'Link' }}</a>
            {%- endif -%}
          {%- endfor -%}
        {%- else -%}
          <a href="#clothing">Clothes</a>
          <a href="#bikes">Hair Products</a>
          <a href="#features">Accessories</a>
          <a href="#community">Connect</a>
        {%- endif -%}
      </nav>

      {%- comment -%} Right: User icon, ShoppingBag icon, CTA, Menu/X (Lucide icons from original code) {%- endcomment -%}
      <div class="elovyn-header-right">
        <a href="{{ routes.account_login_url }}" aria-label="Account">
          {% render 'icon-user', width: 20, height: 20 %}
        </a>
        <a href="{{ routes.cart_url }}" aria-label="Cart" style="position: relative;">
          {% render 'icon-shopping-bag', width: 20, height: 20 %}
          {%- if cart.item_count > 0 -%}<span class="elovyn-cart-badge">{{ cart.item_count }}</span>{%- endif -%}
        </a>
        <a href="{% if section.settings.book_test_ride_link != blank %}{{ section.settings.book_test_ride_link }}{% else %}#{% endif %}" class="elovyn-cta">Book a test ride</a>
        <button type="button" class="elovyn-mobile-btn" aria-label="Toggle menu" aria-expanded="false">
          <span class="icon-open">{% render 'icon-menu', width: 24, height: 24 %}</span>
          <span class="icon-close">{% render 'icon-x', width: 24, height: 24 %}</span>
        </button>
      </div>
    </div>
  </header>

  {%- comment -%} Mobile menu overlay {%- endcomment -%}
  <div id="elovyn-mobile-menu" aria-hidden="true">
    <nav role="navigation" aria-label="Mobile menu">
      {%- if section.blocks.size > 0 -%}
        {%- for block in section.blocks -%}
          {%- if block.type == 'nav_link' -%}
            {%- assign link_url = block.settings.url -%}
            {%- if link_url == blank -%}{%- assign link_url = '#' -%}{%- endif -%}
            <a href="{{ link_url }}" class="elovyn-mobile-link">{{ block.settings.label | default: 'Link' }}</a>
          {%- endif -%}
        {%- endfor -%}
      {%- else -%}
        <a href="#clothing" class="elovyn-mobile-link">Clothes</a>
        <a href="#bikes" class="elovyn-mobile-link">Hair Products</a>
        <a href="#features" class="elovyn-mobile-link">Accessories</a>
        <a href="#community" class="elovyn-mobile-link">Connect</a>
      {%- endif -%}
      <a href="{% if section.settings.book_test_ride_link != blank %}{{ section.settings.book_test_ride_link }}{% else %}#{% endif %}" class="elovyn-mobile-cta">Book a test ride</a>
    </nav>
  </div>
</div>

<script>
  (function() {
    var wrap = document.getElementById('elovyn-header-wrap');
    var mobileMenu = document.getElementById('elovyn-mobile-menu');
    var mobileBtn = wrap && wrap.querySelector('.elovyn-mobile-btn');
    if (!wrap || !mobileMenu || !mobileBtn) return;
    function toggleMenu() {
      mobileMenu.classList.toggle('open');
      mobileBtn.classList.toggle('active');
      mobileBtn.setAttribute('aria-expanded', mobileMenu.classList.contains('open'));
      mobileMenu.setAttribute('aria-hidden', !mobileMenu.classList.contains('open'));
    }
    mobileBtn.addEventListener('click', toggleMenu);
    mobileMenu.querySelectorAll('a').forEach(function(a) {
      a.addEventListener('click', function() { toggleMenu(); });
    });
    window.addEventListener('scroll', function() {
      wrap.classList.toggle('scrolled', window.pageYOffset > 50);
    });
  })();
</script>

{% schema %}
{
  "name": "Header",
  "class": "section-header",
  "settings": [
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image",
      "info": "Shown at 8rem height like the original. Leave blank to show store name."
    },
    {
      "type": "text",
      "id": "logo_alt",
      "label": "Logo alt text",
      "default": "",
      "info": "Leave blank to use store name."
    },
    {
      "type": "url",
      "id": "logo_link",
      "label": "Logo link",
      "info": "Leave blank to link to homepage."
    },
    {
      "type": "header",
      "content": "Navigation bar"
    },
    {
      "type": "paragraph",
      "content": "Add and reorder menu links below. Default links: Clothes, Hair Products, Accessories, Connect."
    },
    {
      "type": "header",
      "content": "CTA button"
    },
    {
      "type": "url",
      "id": "book_test_ride_link",
      "label": "Book a test ride link",
      "default": "",
      "info": "URL for the 'Book a test ride' button. Leave blank for #."
    }
  ],
  "blocks": [
    {
      "type": "nav_link",
      "name": "Navigation link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Link"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL",
          "default": "#"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "nav_link",
        "settings": {
          "label": "Clothes",
          "url": "#clothing"
        }
      },
      {
        "type": "nav_link",
        "settings": {
          "label": "Hair Products",
          "url": "#bikes"
        }
      },
      {
        "type": "nav_link",
        "settings": {
          "label": "Accessories",
          "url": "#features"
        }
      },
      {
        "type": "nav_link",
        "settings": {
          "label": "Connect",
          "url": "#community"
        }
      }
    ]
  }
}
{% endschema %}
